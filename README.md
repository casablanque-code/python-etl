# WeStocked Inventory ETL ‚Äî XLSX/CSV/XML ‚ûú Supabase CSV

**task:** from ¬´messed up¬ª (Excel/CSV/XML) to do correct format CSV for Supabase db
App WeStocked:

```text
inventory_number, name, location, serial_number, mac_address
```

Repo works **without installation any soft**: all builds in **GitHub Actions**.

---

## üîß how to use:

1. –ó–∞–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–æ–ª–æ–∂–∏—Ç–µ –≤–∞—à —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É `input/` (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è `.xlsx`, `.csv`, `.xml`).  
   –ü—Ä–∏–º–µ—Ä—ã –∏–º—ë–Ω: `eq.xlsx`, `inventory.csv`, `dump.xml`.
2. –°–¥–µ–ª–∞–π—Ç–µ **Commit/Push**.  
3. –ó–∞–π–¥–∏—Ç–µ –≤ –≤–∫–ª–∞–¥–∫—É **Actions ‚Üí Build ETL ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫ ‚Üí Artifacts** –∏ —Å–∫–∞—á–∞–π—Ç–µ `etl_outputs.zip`.  
   –í–Ω—É—Ç—Ä–∏ –±—É–¥–µ—Ç:
   - `supabase_items.csv` ‚Äî **–≥–æ—Ç–æ–≤—ã–π** CSV –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –≤ Supabase (—Å—Ç—Ä–æ–∫–∏ –±–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π —É–¥–∞–ª–µ–Ω—ã);
   - `invalid_rows.csv` ‚Äî —Å—Ç—Ä–æ–∫–∏, –æ—Ç–±—Ä–æ—à–µ–Ω–Ω—ã–µ –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –ø–æ—á–µ–º—É –Ω–µ –ø—Ä–æ—à–ª–∏);
   - `report.md` ‚Äî –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ (—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ/—É–¥–∞–ª–µ–Ω–æ).

> –ù–∏—á–µ–≥–æ —Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ü–ö –Ω–µ –Ω—É–∂–Ω–æ ‚Äî –≤—Å—ë —Å–¥–µ–ª–∞–µ—Ç CI.

---

## üì¶ –ü—Ä–∏—ë–º–Ω–∏–∫ (—Ü–µ–ª–µ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏)

–ü–æ—Ä—è–¥–æ–∫ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (UTF‚Äë8, –±–µ–∑ BOM):

- **–∏–Ω–≤–µ–Ω—Ç–∞—Ä–Ω–∏–∫** ‚Äî —Å—Ç—Ä–æ–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
- **–∏–º—è** ‚Äî —Å—Ç—Ä–æ–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
- **–ª–æ–∫–∞—Ü–∏—è** ‚Äî —Å—Ç—Ä–æ–∫–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π)
- **—Å–µ—Ä–∏–π–Ω–∏–∫** ‚Äî —Å—Ç—Ä–æ–∫–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π, –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä)
- **–º–∞–∫** ‚Äî MAC‚Äë–∞–¥—Ä–µ—Å, —Ñ–æ—Ä–º–∞—Ç `AA:BB:CC:DD:EE:FF` (–µ—Å–ª–∏ –º–æ–∂–Ω–æ –ø–æ—á–∏—Å—Ç–∏—Ç—å, –∏–Ω–∞—á–µ –æ—Å—Ç–∞–≤–∏–º, –∫–∞–∫ –µ—Å—Ç—å)

–õ—é–±—ã–µ —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ **–Ω–µ—Ç ‚Äú–∏–Ω–≤–µ–Ω—Ç–∞—Ä–Ω–∏–∫‚Äù –∏–ª–∏ ‚Äú–∏–º—è‚Äù**, ‚Äî **—É–¥–∞–ª—è—é—Ç—Å—è** –∏–∑ `supabase_items.csv` –∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ `invalid_rows.csv`.

---

## üß† –ß—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –≤—Ö–æ–¥–µ

- **XLSX/CSV** ‚Äî —Å –ª—é–±—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –Ω–∞ RU/EN. –ú–∞–ø–ø–∏–Ω–≥ –∞–ª–∏–∞—Å–æ–≤ –ø—Ä–∏–≤–µ–¥—ë—Ç –∏—Ö –∫ —Ü–µ–ª–µ–≤—ã–º –∫–æ–ª–æ–Ω–∫–∞–º.
- **XML** ‚Äî –æ–∂–∏–¥–∞—é—Ç—Å—è –ø–æ–≤—Ç–æ—Ä—ã –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö —É–∑–ª–æ–≤ (`<item>`, `<record>`, `<row>`, `<device>` ‚Ä¶).  
  –ò–∑ –¥–æ—á–µ—Ä–Ω–∏—Ö —Ç–µ–≥–æ–≤/–∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤—ã—Ç—è–Ω–µ–º –ø–æ–ª—è –ø–æ –∞–ª–∏–∞—Å–∞–º. –ü—Ä–∏–º–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –∏–º—ë–Ω —Å–º. –≤ `scripts/config.py`.

–ï—Å–ª–∏ –∫–æ–ª–æ–Ω–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Äî –±—É–¥–µ—Ç –ø—É—Å—Ç–∞—è.

---

## üèÉ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –¢—Ä–µ–±—É–µ—Ç—Å—è Python 3.10+
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è XML/XLSX:
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ (–æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–≤—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ input/):
python scripts/etl.py
```

–í—ã—Ö–æ–¥ –±—É–¥–µ—Ç –≤ `output/`.

---

## ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —É—Å—Ç—Ä–æ–µ–Ω–æ

- `scripts/config.py` ‚Äî —Å–ª–æ–≤–∞—Ä–∏ –∞–ª–∏–∞—Å–æ–≤ –∫–æ–ª–æ–Ω–æ–∫ (RU/EN) –∏ –ø—Ä–∞–≤–∏–ª–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (MAC, —Å–µ—Ä–∏–π–Ω–∏–∫).
- `scripts/etl.py` ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä (–Ω–∞—Ö–æ–¥–∏—Ç —Ñ–∞–π–ª –≤ `input/`, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø, –ø–∞—Ä—Å–∏—Ç, —á–∏—Å—Ç–∏—Ç, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç).
- `.github/workflows/etl.yml` ‚Äî CI: —Å—Ç–∞–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç ETL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ GitHub.

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è
MIT
